<!DOCTYPE html>
<html>
<head>
    <title>Search System</title>
</head>
<body>
    <input type="text" id="searchId" placeholder="Enter ID">
    <button onclick="searchData()">Search</button>
    <div id="result">
        <p>IC: <span id="ic"></span></p>
        <p>School: <span id="school"></span></p>
        <p>Part: <span id="part"></span></p>
        <p>Certificate Status: <span id="certificateStatus"></span></p>
    </div>

    <script>
        // Assuming CSV data format: ID, IC, School, Part
let data = []; // This will hold the parsed CSV data

// Function to load and parse CSV file from an external URL
function loadCSV(url) {
    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.text();
        })
        .then(text => {
            // Parse the CSV text
            let rows = text.split("\n");
            data = rows.map(row => {
                let cols = row.split(",");
                return {
                    id: cols[0].trim(),
                    ic: cols[1].trim(),
                    school: cols[2].trim(),
                    part: cols[3].trim()
                };
            });
        })
        .catch(error => console.error('Error fetching the CSV:', error));
}

// Call loadCSV with the path to your CSV file
loadCSV("https://raw.githubusercontent.com/officialdanielamani/officialdanielamani.github.io/main/project/cert_engine/data.json");


// Function to search data
function searchData() {
    let searchId = document.getElementById("searchId").value;
    let result = data.find(row => row.id === searchId);

    if (result) {
        document.getElementById("ic").textContent = result.ic;
        document.getElementById("school").textContent = result.school;
        document.getElementById("part").textContent = result.part;
        document.getElementById("certificateStatus").textContent = "Certificate Valid";
    } else {
        document.getElementById("ic").textContent = "Not Found";
        document.getElementById("school").textContent = "Not Found";
        document.getElementById("part").textContent = "Not Found";
        document.getElementById("certificateStatus").textContent = "Certificate Invalid";
    }
}


    </script>
</body>
</html>
